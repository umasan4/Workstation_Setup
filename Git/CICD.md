# CI/CD 学習メモ
CI/CD環境を構築する手順や自己理解のためのメモ

## 1. ワークフローを作成する
- CI/CDを導入するリポジトリに以下の構造を作成する  
workflows下に作成した.yml をワークフローファイルと呼ぶ

``` properties
└── .github
    └── workflows
        └── <workflow_name>.yml
```

## 2. ワークフローの中身を定義する
yamlで定義していく

```yaml
name: "Hello world"
  
on: [push] # トリガ(何をしたら実行する？)
  
jobs:                       # ジョブ(何を実行する？)
  test-job:                 # ジョブID(システムが参照)
    name: Hello world job   # ジョブ名(人間が参照するラベル)
    runs-on: ubuntu-latest  # 実行環境
    steps:                  # 実際に実行される内容
      - run: echo "Hello world !"
```

------------------------------------------------------------


# 学習メモ
## 重要
```
ブランチ保護 (Branch Protection)

なぜ重要？: 
⇒ SREの仕事は「自動化」だけでなく「ガードレール（安全装置）を作ること」だからです

何をする？: 
⇒ 「CI（terraform plan）が成功しないと、main ブランチにマージできないようにする」という設定です
    これが設定されていないCIは、ただの「飾り」になってしまいます

条件分岐 / ジョブ間の依存
⇒ 「plan が失敗したら apply を実行しない」といった制御に必要です
```
### 特定のブランチを保護する仕組みを指す
1. ブランチの指定 : ワイルドカードなどを用いて指定する
2. 保護する仕組み : マージ前に Pull Request によるレビューを要求など
- コードオーナー

## 余裕があれば
```
承認フロー
terraform apply（本番変更）の前に、「人間がボタンを押さないと進まない」ようにする設定です
本番運用のリアリティが出るため、ポートフォリオとしての評価が上がります

slack通知
apply の結果をSlackに飛ばす設定です
「ChatOps」の基礎として評価されます
```